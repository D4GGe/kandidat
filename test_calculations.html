



<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="500" height="500" style="border-style: solid;
    border-width: 5px;"></canvas>
    
  <script src="http://349.se/gauss.js"></script>
  <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="http://numericjs.com/lib/numeric-1.2.6.min.js"></script>
    <script>
    /*
    ------------------info------------------
    For matrix operations and so on. http://numericjs.com/documentation.html
    For basic math http://www.w3schools.com/jsref/jsref_obj_math.asp


     the '/' in matlab or gauss elemenitation  is preformd like folows:     

     * Solves this system:
     * x + y + z = 6
     * 2x + y + 2z = 10
     * x + 2y + 3z = 14
        A = [[1, 1, 1],
              [2, 1, 2], 
              [1, 2, 3]];

        x = [6, 10, 14];
        result = gauss($A, $x);
    */






////////////  helpers by Daniel ////////////////////////////////////
    function plotLine(can , matrix){
      var context = can.getContext('2d');
      context.beginPath();
      context.moveTo(mathToWebCord(matrix[0],can.height)[0],mathToWebCord(matrix[0],can.height)[1]);
      for (var i = 0; i <= matrix.length - 1; i++) {  
          context.lineTo(mathToWebCord(matrix[i],can.height)[0],mathToWebCord(matrix[i],can.height)[1]);
      };
      context.stroke();
    }

    function plotPoints(can , matrix,size){
      var context = can.getContext('2d');   
      for (var i = 0; i <= matrix.length - 1; i++) {  
          context.beginPath();
          context.arc(mathToWebCord(matrix[i],can.height)[0], mathToWebCord(matrix[i],can.height)[1], size, 0, 2 * Math.PI, true);
          
          context.fill();
          
      };
      
    }

     function mathToWebCord(cord,ySize){
      x = cord[0];
      y = cord[1];
      return [x,ySize-y];
     }

     function webToMathCord(cord,ySize){
      x = cord[0];
      y = cord[1];
      return [x,y-ySize];
     
     }

     function createMatrix(start,end,inc,func){
      var ans = [];
      for (var i = start; i<=end; i=i+inc) {
        ans.push([i,func(i)]);
        console.log(i);
      };
      return ans;
     }


///////////////////////////////////////////////////////////////////////////
    

        var E = 210*10000000;
var I = 3;

// Rad 1 och 6 kan tas bort från ekv- och w-listorna. 
//Momentfritt stöd till vänster ger:
var wv = 0;   // ingen utböjning
var w2v = 100;  // momentfritt
var qv = 0;     // pålagd kraft
var w4v = qv;
var xv = 0; 
//stryker ekvationerna 2-1=1 och 4-1=3 (kan strycka 1 också)

//Fast inspänd till höger ger:
var wh = 0;
var w1h = 0;
var qh = 0;
var w4h = qh;
var xh = 1;
//stryker ekvationerna 4+5-1=8 och 5+5-1=9 ty höger

var ekv = [[qv, 0, 0, 0, 0],
//[qv*xv, 1, 0, 0, 0,],
[qv*Math.pow(xv,2)/2, xv, 1, 0, 0],
//[qv*Math.pow(xv,3)/6, Math.pow(xv,2)/2, xv, 1, 0],
[qv*Math.pow(xv,4)/24, Math.pow(xv,3)/6, Math.pow(xv,2)/2, xv, 1],
[qh, 0, 0, 0, 0],
[qh*xh, 1, 0, 0, 0,],
[qh*Math.pow(xh,2)/2, xh, 1, 0, 0]
//[qh*Math.pow(xh,3)/6, Math.pow(xh,2)/2, xh, 1, 0],
//[qh*Math.pow(xh,4)/24, Math.pow(xh,3)/6, Math.pow(xh,2)/2, xh, 1]
];

// Matrisen som genereras är konst = [1, A, B, C, D];

var w = [E*I*w4v, 
//E*I*w3v, 
E*I*w2v, 
//E*I*w1v, 
E*I*wv, 
E*I*w4h, 
//E*I*w3h, 
//E*I*w2h, 
E*I*w1h, 
E*I*wh
];






        var canvas = document.getElementById('myCanvas');
        
        
    
    
   function doCalcPoint(A,B,C,D,x,i,e,q){
              return ((1/e*i) *(q*x*x*x*x/2*A + A*x*x*x/6+ B*x*x/2 + C*x + D));
          }
       
          function begin(){
          var i = 1;
          var e = 200000000;
          var q = -100000000;
          var a = [[0,0,0,1],[0,0,1,0],[1,0,0,0],[1,1,0,0]];
          var b = [0,0,-q/e,0];
         
          var ainv = numeric.inv(a);
          var ans = numeric.dot(ainv,b);
          var ma = [];
          console.log(ans);

          for (var n=0; n <= 500; n++) {
            ma.push([n,doCalcPoint(ans[0],ans[1],ans[2],ans[3],n/500,i,e,q)*500+250])
          };
          console.log(ma);
          plotLine(canvas,ma);

        
      }
        
        begin();
        //var testcon = canvas.getContext('2d');
        //plotPoints(canvas,A, 10);
        //plotLine(canvas,A);
     // var context = canvas.getContext('2d');
     // context.beginPath();
     // context.moveTo(100, 150);
     // context.lineTo(450, 50);
     // context.stroke();
    </script>
  </body>
</html>     